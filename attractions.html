<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>景点介绍 · 深圳旅游</title>
    <script>
      // 预设 html lang，减少首次渲染闪烁
      (function(){
        var stored = localStorage.getItem('lang');
        var nav = (navigator.language||'zh').toLowerCase();
        var lang = stored ? stored : (nav.startsWith('zh') ? 'zh' : 'en');
        document.documentElement.lang = lang;
      })();
    </script>
    <link rel="stylesheet" href="styles/base.css" />
    <link rel="stylesheet" href="styles/layout.css" />
    <link rel="stylesheet" href="styles/components.css" />
    <link rel="stylesheet" href="styles/animations.css" />
    <script type="module" src="scripts/i18n.js" defer></script>
    <script type="module" src="scripts/nav.js" defer></script>
    <script type="module" src="scripts/main.js" defer></script>
  </head>
  <body>
    <header class="site-header">
      <div class="container header-inner">
        <a class="logo" href="index.html" data-i18n="nav.brand">深圳旅游</a>
        <button class="nav-toggle" aria-label="Toggle Menu">☰</button>
        <nav class="site-nav" aria-label="Primary">
          <a href="index.html" data-i18n="nav.home">首页</a>
          <a href="attractions.html" data-i18n="nav.attractions">景点介绍</a>
          <a href="food.html" data-i18n="nav.food">美食推荐</a>
          <a href="transport.html" data-i18n="nav.transport">交通指南</a>
          <a href="tips.html" data-i18n="nav.tips">实用信息</a>
        </nav>
        <div class="lang-switch">
          <button class="btn btn-ghost" data-lang="zh">中文</button>
          <span class="divider">|</span>
          <button class="btn btn-ghost" data-lang="en">EN</button>
        </div>
      </div>
    </header>

    <main class="section">
      <div class="container">
        <h1 data-i18n="attractions.title">景点介绍</h1>
        <div class="tabs">
          <button class="tab active" data-filter="natural" data-i18n="attractions.tabs.natural">自然</button>
          <button class="tab" data-filter="cultural" data-i18n="attractions.tabs.cultural">人文</button>
        </div>
        <div class="grid grid-3" id="attractions-list">
          <article class="card" data-type="natural">
            <h3 data-i18n="attractions.items.dameisha.title">大梅沙海滨公园</h3>
            <p data-i18n="attractions.items.dameisha.desc">碧海银沙，亲海休闲胜地。</p>
          </article>
          <article class="card" data-type="natural">
            <h3 data-i18n="attractions.items.wutong.title">梧桐山</h3>
            <p data-i18n="attractions.items.wutong.desc">城市最高峰，徒步与观景。</p>
          </article>
          <article class="card" data-type="cultural">
            <h3 data-i18n="attractions.items.pingan.title">平安金融中心</h3>
            <p data-i18n="attractions.items.pingan.desc">摩天地标，城市天际线代表。</p>
          </article>
          <article class="card" data-type="cultural">
            <h3 data-i18n="attractions.items.oct.title">华侨城创意园</h3>
            <p data-i18n="attractions.items.oct.desc">创意聚集地，艺术与咖啡的热土。</p>
          </article>
        </div>
      </div>
    </main>

    <footer class="site-footer">
      <div class="container">
        <p data-i18n="footer.copy">© 深圳旅游 · 2025</p>
      </div>
    </footer>

    <script type="module">
      // 中文函数注释：根据选中的标签过滤景点卡片；翻译在初次加载后已就绪，无需重复应用
      function applyFilter(type) {
        const list = document.getElementById('attractions-list');
        list.querySelectorAll('.card').forEach(c => {
          c.style.display = (type === 'all' || c.getAttribute('data-type') === type) ? '' : 'none';
        });
      }

      const tabs = document.querySelectorAll('.tab');
      tabs.forEach(t => t.addEventListener('click', () => {
        tabs.forEach(x => x.classList.remove('active'));
        t.classList.add('active');
        const type = t.getAttribute('data-filter');
        applyFilter(type);
      }));

      // 首次进入页面按默认激活标签进行筛选，修复“默认显示错误”问题
      const active = document.querySelector('.tab.active');
      applyFilter(active ? active.getAttribute('data-filter') : 'natural');
    </script>
  </body>
  </html>
